"use strict";function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function i(e,t,r){return(i=o()?Reflect.construct:function(e,t,r){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return r&&n(i,r.prototype),i}).apply(null,arguments)}function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return i(e,arguments,r(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n(o,e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Object.defineProperty(exports,"__esModule",{value:!0});var a,s,f=function(e){function r(t){var n;return n=e.call(this,t)||this,Object.setPrototypeOf(c(n),(this instanceof r?this.constructor:void 0).prototype),Error.captureStackTrace(c(n),r),n.name=n.constructor.name,n}return t(r,e),r}(u(TypeError)),l=function(e){function r(t){var n;return n=e.call(this,t)||this,Object.setPrototypeOf(c(n),(this instanceof r?this.constructor:void 0).prototype),Error.captureStackTrace(c(n),r),n.name=n.constructor.name,n}return t(r,e),r}(u(ReferenceError)),p=!("object"!=typeof process||!(null==(a=process)||null==(s=a.versions)?void 0:s.node)),v=function(e){return function(t){return p?"["+e+"m"+t+"[0m":t}},d={blue:v("34"),white:v("37"),yellow:v("33")},h=d.white("================================"),w=function(e){var t=e.errors,r=void 0===t?{}:t;if(Object.keys(r).length){for(var n=[],o=[],i=0,u=Object.entries(r);i<u.length;i++){var c=u[i],a=c[0],s=c[1];s instanceof l?n.push("    "+d.blue(a)+": "+(s.message||"(required)")):o.push("    "+d.blue(a)+": "+((null==s?void 0:s.message)||"(invalid format)"))}o.length&&o.unshift(" "+d.yellow("Invalid")+" environment variables:"),n.length&&n.unshift(" "+d.yellow("Missing")+" environment variables:");var f=[h,o.sort().join("\n"),n.sort().join("\n"),d.yellow("\n Exiting with error code 1"),h].filter((function(e){return!!e})).join("\n");if(console.error(f),!p)throw new TypeError("Environment validation failed");process.exit(1)}},y=Symbol("envalid - test only");function m(e){var t=e.spec,r=e.name,n=e.rawValue;if("function"!=typeof t._parse)throw new f('Invalid spec for "'+r+'"');var o=t._parse(n);if(t.choices){if(!Array.isArray(t.choices))throw new TypeError('"choices" must be an array (in spec for "'+r+'")');if(!t.choices.includes(o))throw new f('Value "'+o+'" not in choices ['+t.choices+"]")}if(null==o)throw new f('Invalid value for env var "'+r+'"');return o}function b(e){return e.desc+(e.example?' (eg. "'+e.example+'")':"")+(e.docs?". See "+e.docs:"")}var O=function(e,t){return e[t]};function g(e,t,r){var n;void 0===r&&(r={});for(var o={},i={},u=Object.keys(t),c=O(e,"NODE_ENV"),a=0,s=u;a<s.length;a++){var f,p=s[a],v=t[p],d=c&&"production"!==c&&v.hasOwnProperty("devDefault"),h=d?v.devDefault:void 0,g=null!=(f=O(e,p))?f:void 0===h?v.default:h,x=v.hasOwnProperty("default")&&v.default===g||d&&h===g;try{if(g===y)throw new l(b(v));if(void 0===g){if(!x)throw new l(b(v))}else o[p]=m({name:p,spec:v,rawValue:g})}catch(e){var E;if(null===(null==(E=r)?void 0:E.reporter))throw e;i[p]=e}}return((null==(n=r)?void 0:n.reporter)||w)({errors:i,env:o}),o}var x=function(e,t){var r=["length","inspect","hasOwnProperty",Symbol.toStringTag,Symbol.iterator,"asymmetricMatch","nodeType","then","__esModule"],n=["Symbol(util.inspect.custom)","Symbol(nodejs.util.inspect.custom)"];return new Proxy(e,{get:function(e,o){if(r.includes(o)||n.includes(o.toString()))return e[o];if(!e.hasOwnProperty(o)){if("object"==typeof t&&(null==t||null==t.hasOwnProperty?void 0:t.hasOwnProperty(o)))throw new ReferenceError("[envalid] Env var "+o+" was accessed but not validated. This var is set in the environment; please add an envalid validator for it.");throw new ReferenceError("[envalid] Env var not found: "+o)}return e[o]},set:function(e,t){throw new TypeError("[envalid] Attempt to mutate environment value: "+t)}})},E=function(e,t){var r=e.NODE_ENV||t.NODE_ENV,n=!r||"production"===r;return Object.defineProperties(e,{isDevelopment:{value:"development"===r},isDev:{value:"development"===r},isProduction:{value:n},isProd:{value:n},isTest:{value:"test"===r}}),e},j=function(e,t){return x(E(e,t),t)},_=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,P=/([a-f0-9]+:+)+[a-f0-9]+/,N=/^[^@\s]+@[^@\s]+\.[^@\s]+$/,S=function(t){return function(r){return e({},r,{_parse:t})}};exports.EnvError=f,exports.EnvMissingError=l,exports.accessorMiddleware=E,exports.applyDefaultMiddleware=j,exports.bool=function(e){return S((function(e){switch(e){case!0:case"true":case"t":case"1":return!0;case!1:case"false":case"f":case"0":return!1;default:throw new f('Invalid bool input: "'+e+'"')}}))(e)},exports.cleanEnv=function(e,t,r){void 0===r&&(r={});var n=g(e,t,r);return Object.freeze(j(n,e))},exports.customCleanEnv=function(e,t,r,n){void 0===n&&(n={});var o=g(e,t,n);return Object.freeze(r(o,e))},exports.email=function(e){return S((function(e){if(N.test(e))return e;throw new f('Invalid email address: "'+e+'"')}))(e)},exports.host=function(e){return S((function(e){if(!function(e){if(!e.length)return!1;for(var t,r=e.split("."),n=0;n<r.length;n++){if(!/^[a-z\u00a1-\uffff0-9-]+$/i.test(t=r[n]))return!1;if(/[\uff01-\uff5e]/.test(t))return!1;if("-"===t[0]||"-"===t[t.length-1])return!1}return!0}(e)&&!function(e){return!!e.length&&(_.test(e)||P.test(e))}(e))throw new f('Invalid host (domain or ip): "'+e+'"');return e}))(e)},exports.json=function(e){return S((function(e){try{return JSON.parse(e)}catch(t){throw new f('Invalid json: "'+e+'"')}}))(e)},exports.makeValidator=S,exports.num=function(e){return S((function(e){var t=+e;if(Number.isNaN(t))throw new f('Invalid number input: "'+e+'"');return t}))(e)},exports.port=function(e){return S((function(e){var t=+e;if(Number.isNaN(t)||""+t!=""+e||t%1!=0||t<1||t>65535)throw new f('Invalid port input: "'+e+'"');return t}))(e)},exports.str=function(e){return S((function(e){if("string"==typeof e)return e;throw new f('Not a string: "'+e+'"')}))(e)},exports.strictProxyMiddleware=x,exports.testOnly=function(e){return y},exports.url=function(e){return S((function(e){try{return new URL(e),e}catch(t){throw new f('Invalid url: "'+e+'"')}}))(e)};
//# sourceMappingURL=envalid.cjs.production.min.js.map
